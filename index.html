<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sunny Roads Adventures â€“ Phase 2 Upgrade</title>
<style>
  /* Basic Reset & Layout */
  * { margin:0; padding:0; box-sizing:border-box; font-family:Arial,sans-serif; }
  body { background:#f4f4f4; color:#333; line-height:1.6; }
  a { text-decoration:none; color:#fff; }
  img { max-width:100%; height:auto; }

  /* Header / Tabs */
  header { background:#1e90ff; color:#fff; padding:15px; display:flex; justify-content:space-between; align-items:center; }
  header img { height:50px; }
  nav { display:flex; justify-content:center; background:#4682b4; }
  nav a { color:#fff; padding:12px 20px; font-weight:bold; display:inline-block; }
  nav a:hover { background:#5a9bd3; }

  /* Sections */
  section { padding:20px; max-width:900px; margin:0 auto; }
  h2 { margin-bottom:15px; }

  /* Interactive Map */
  #interactive-map { position:relative; max-width:600px; margin:20px auto; border:2px solid #ccc; }
  .map-point { position:absolute; width:20px; height:20px; background:red; border-radius:50%; cursor:pointer; }
  .map-tooltip { position:absolute; background:#fff; padding:8px; border:1px solid #ccc; border-radius:5px; display:none; z-index:10; }

  /* Tours Section */
  .tour { background:#fff; padding:15px; margin-bottom:10px; border-radius:5px; }
  .availability { font-weight:bold; margin-bottom:8px; }

  /* Dashboard */
  #dashboard { display:none; padding:20px; background:#e6f2ff; border-radius:5px; margin-bottom:20px; }
  #dashboard h3 { margin-bottom:10px; }

  /* Hub Section */
  #hub { background:#fff; border-radius:5px; padding:20px; margin-bottom:20px; }

  /* Footer */
  footer { background:#4682b4; color:#fff; text-align:center; padding:15px; }

  /* Classes Video */
  #classes { margin-top:20px; text-align:center; }
  video { max-width:100%; border-radius:5px; }
</style>
</head>
<body>

<!-- Header -->
<header>
  <img src="logo.png" alt="Sunny Roads Adventures Logo">
</header>

<!-- Navigation Tabs -->
<nav>
  <a href="#home">Home</a>
  <a href="#tours">Tours</a>
  <a href="#all-routes">All Routes</a>
  <a href="#hub">Join the Hub</a>
  <a href="#dashboard">Dashboard</a>
</nav>

<!-- Home -->
<section id="home">
  <h1>Welcome to Sunny Roads Adventures</h1>
  <img src="map.png" alt="Map of Granada Tours" id="map">

  <!-- Classes Video -->
  <div id="classes">
    <video controls>
      <source src="classes.mp4" type="video/mp4">
      Your browser does not support HTML5 video.
    </video>
  </div>

  <!-- Interactive Map -->
  <div id="interactive-map">
    <div class="map-point" data-tour="Masaya & Catarina" style="top:50px; left:100px;"></div>
    <div class="map-point" data-tour="Managua Tour" style="top:150px; left:300px;"></div>
    <div class="map-point" data-tour="Rivas Tour" style="top:200px; left:200px;"></div>
    <div class="map-point" data-tour="San Juan del Sur" style="top:250px; left:400px;"></div>
    <div class="map-point" data-tour="Popoyo" style="top:300px; left:350px;"></div>
    <div class="map-tooltip" id="map-tooltip"></div>
  </div>
</section>

<!-- Tours Section -->
<section id="tours">
  <h2>Our Tours</h2>
  <div class="tour">
    <h3>Masaya & Catarina</h3>
    <p>Price: $24</p>
    <p class="availability" id="Masaya & Catarina-availability"></p>
  </div>
  <div class="tour">
    <h3>Managua</h3>
    <p>Price: $48</p>
    <p class="availability" id="Managua Tour-availability"></p>
  </div>
  <div class="tour">
    <h3>Rivas</h3>
    <p>Price: $62</p>
    <p class="availability" id="Rivas Tour-availability"></p>
  </div>
  <div class="tour">
    <h3>San Juan del Sur</h3>
    <p>Price: $74</p>
    <p class="availability" id="San Juan del Sur-availability"></p>
  </div>
  <div class="tour">
    <h3>Popoyo</h3>
    <p>Price: $74</p>
    <p class="availability" id="Popoyo-availability"></p>
  </div>
</section>

<!-- All Routes -->
<section id="all-routes">
  <h2>All Routes & Suggested Prices</h2>
  <!-- Can reuse table from Phase 1 -->
</section>

<!-- Hub -->
<section id="hub">
  <h2>Sunny Roads Service Hub</h2>
  <p>Add your service to the hub. Approved services are visible to all users. Applications will be sent to <a href="mailto:sunnyroadsadcentures@gmail.com">sunnyroadsadcentures@gmail.com</a></p>
</section>

<!-- Dashboard -->
<section id="dashboard">
  <h3>Service Partner / Admin Dashboard</h3>
  <p>Login feature coming soon. You will see:</p>
  <ul>
    <li>Bookings per tour</li>
    <li>Availability status</li>
    <li>Revenue tracking</li>
    <li>Low spots warning (orange indicator)</li>
  </ul>
</section>

<!-- Footer -->
<footer>
  &copy; 2026 Sunny Roads Adventures | Contact: <a href="https://wa.me/50558365522" style="color:#fff;">+505 5836 5522</a>
</footer>

<script>
// -------------------- Phase 2 Upgrade JS --------------------

// Tour Data
let tours = {
  "Masaya & Catarina": { price: 24, spots: 5 },
  "Managua Tour": { price: 48, spots: 5 },
  "Rivas Tour": { price: 62, spots: 5 },
  "San Juan del Sur": { price: 74, spots: 5 },
  "Popoyo": { price: 74, spots: 5 }
};

// Initialize localStorage for bookings
if (!localStorage.getItem('tourBookings')) {
  localStorage.setItem('tourBookings', JSON.stringify({}));
}

// Function: Update map point colors based on availability
function updateMapColors() {
  const bookings = JSON.parse(localStorage.getItem('tourBookings'));
  document.querySelectorAll('.map-point').forEach(point => {
    const tour = point.dataset.tour;
    const spotsLeft = tours[tour].spots - (bookings[tour] || 0);
    if (spotsLeft <= 0) point.style.background = 'red';
    else if (spotsLeft <= 2) point.style.background = 'orange';
    else point.style.background = 'green';

    // Update availability text in tour section
    const availText = document.getElementById(tour + '-availability');
    if (availText) availText.textContent = `Spots left: ${spotsLeft}`;
  });
}

// Initial update
updateMapColors();

// Tooltip & Booking click for map points
const tooltip = document.getElementById('map-tooltip');
document.querySelectorAll('.map-point').forEach(point => {
  point.addEventListener('mouseenter', () => {
    tooltip.textContent = point.dataset.tour;
    tooltip.style.display = 'block';
    tooltip.style.top = (point.offsetTop - 30) + 'px';
    tooltip.style.left = (point.offsetLeft + 10) + 'px';
  });
  point.addEventListener('mouseleave', () => {
    tooltip.style.display = 'none';
  });
  point.addEventListener('click', () => {
    const tour = point.dataset.tour;
    const bookings = JSON.parse(localStorage.getItem('tourBookings'));
    bookings[tour] = (bookings[tour] || 0) + 1;
    localStorage.setItem('tourBookings', JSON.stringify(bookings));
    alert(`Booked ${tour}! Contact via WhatsApp: +50558365522`);
    updateMapColors();
  });
});

// Social Share Links
function createShareLinks(tourName) {
  const whatsapp = `https://wa.me/50558365522?text=Check%20out%20${encodeURIComponent(tourName)}%20Tour%20from%20Sunny%20Roads!%20Price%20approx.$${tours[tourName].price}`;
  const facebook = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}&quote=Check%20out%20${encodeURIComponent(tourName)}%20Tour!`;
  return { whatsapp, facebook };
}

// Add social share links to map points dynamically
document.querySelectorAll('.map-point').forEach(point => {
  const tour = point.dataset.tour;
  const links = createShareLinks(tour);
  const btnContainer = document.createElement('div');
  btnContainer.style.marginTop = '5px';
  btnContainer.innerHTML = `
    <a href="${links.whatsapp}" target="_blank" style="color:black; margin-right:5px;">WhatsApp</a>
    <a href="${links.facebook}" target="_blank" style="color:black;">Facebook</a>
  `;
  point.appendChild(btnContainer);
});
</script>

</body>
</html>